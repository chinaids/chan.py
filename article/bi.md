# 分型、笔、线段

原文：

<a href="https://mp.weixin.qq.com/s?__biz=MzIzMTE4OTcxNA==&mid=2247484051&idx=6&sn=3d364fd2e395577a6057eb4101833d43&chksm=e8a6bf2edfd13638e823153ea5fbf1e13c7891b95fa9cd62c8deb79b860d14fd72982c466134&scene=178&cur_album_id=3180884927165497345#rd">《缠中说禅108课》62：分型、笔与线段</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzIzMTE4OTcxNA==&mid=2247484082&idx=1&sn=adf4613bb50a7546c75d910e3c662389&chksm=e8a6bf0fdfd13619f82c2c91fb5cb818db0e70dca360083ec7f65419b8080c6feba1bdb492e6&scene=178&cur_album_id=3180884927165497345#rd">《缠中说禅108课》65：再说说分型、笔、线段</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzIzMTE4OTcxNA==&mid=2247484082&idx=3&sn=feca9c8a52d2c0875cbeeb4a7384c0ed&chksm=e8a6bf0fdfd136193b320cafde133be3c1d124bd55ec6d7f62ca11a2b8b9fcc0cd1fb58cea2f&scene=178&cur_album_id=3180884927165497345#rd">《缠中说禅108课》67：线段的划分标准</a>

<a href="https://mp.weixin.qq.com/s?__biz=MzIzMTE4OTcxNA==&mid=2247484082&idx=7&sn=341c270db75b6ba0e9583da688cf8250&chksm=e8a6bf0fdfd1361905566b715156714416ee6c71b6b8167d66a42bf819fd54ac412ab68a5635&scene=178&cur_album_id=3180884927165497345#rd">《缠中说禅108课》71：线段划分标准的再分辨</a>

## 分型

- 像图 1 这种，第二 K 线高点是相邻三 K 线高点中最高的，而低点也是相邻三 K 线低点中最高的，本 ID 给一个定义叫顶分型；图 2 这种叫底分型，第二 K 线低点是相邻三 K 线低点中最低的，而高点也是相邻三 K 线高点中最低的。
- 顶分型的最高点叫该分型的顶，底分型的最低点叫该分型的底，由于顶分型的底和底分型的顶是没有意义的，所以顶分型的顶和底分型的底就可以简称为顶和低。也就是说，当我们以后说顶和底时，就分别是说顶分型的顶和底分型的底。

### K线包含

-  K 线的高低点全在另一 K 线的范围里
	+  在向上时，把两 K 线的最高点当高点，而两 K 线低点中的较高者当成低点
	+  当向下时，把两 K 线的最低点当低点，而两 K 线高点中的较低者当成高点
	+   假设，第 n 根 K 线满足第 n 根与第 n+1 根的包含关系，而第 n 根与第 n-1 根不是包含关系，那么如果 gn>=gn-1，那么称第 n-1、n、n+1 根 K 线是向上的；如果 dn<=dn-1，那么称第 n-1、n、n+1根 K 线是向下的。


## 笔

- 两个相邻的顶和底之间构成一笔
- 一定是相邻的顶和底，隔了几个就不是了
- 顶和底之间至少还有一根 K 线，负责违反结合律
- 上升的一笔，由结合律，就一定是底分型+上升 K 线+顶分型
- 下降的一笔，就是顶分型+下降 K 线+底分型


## 线段

- 所谓的线段，就是至少由三笔组成
- 线段的前三笔，必须有重叠的部分


### 线段破坏


- 线段无非有两种，从向上一笔开始的，和从向下一笔开始的。
	+ 对于从向上一笔开始的，其中的分型构成这样的序列：d1g1d2g2d3g3…dngn（其中 di 代表第 i 个底，gi 代表第 i 个顶）。如果找到 i 和 j，j>=i+2,使得 dj<=gi,那么称向上线段被笔破坏。
	+ 对于从向下一笔开始的，其中的分型构成这样的序列：g1d1g2d2…gndn（其中 di 代表第 i 个底，gi 代表第 i 个顶）。如果找到 i 和 j，j>=i+2,使得 gj>=di,那么称向下线段被笔破坏。
- 缠中说禅线段分解定理：线段被破坏，当且仅当至少被有重叠部分的连续三笔的其中一笔破坏。而只要构成有重叠部分的前三笔，那么必然会形成一线段，换言之，线段破坏的充要条件，就是被另一个线段破坏。
- 特征序列:
	+ 用 S 代表向上的笔，X 代表向下的笔。那么所有的线段，无非两种：一、从向上笔开始；二、从向下笔开始
	+ 定义：序列 X1X2…Xn 成为以向上笔开始线段的特征序列；序列 S1S2…Sn 成为以向下笔开始线段的特征序列。特征序列两相邻元素间没有重合区间，称为该序列的一个**缺口**。
	+  关于特征序列，把每一元素看成是一 K 线，那么，如同一般 K 线图中找分型的方法，也存在所谓的包含关系，也可以对此进行非包含处理。经过非包含处理的特征序列，成为**标准特征序列**。以后没有特别说明，特征序列都是指标准特征序列。
- 在标准特征序列里，构成分型的三个相邻元素，只有两种可能：
	+ 第一种情况：特征序列的顶分型中，第一和第二元素间不存在特征序列的缺口，那么该线段在该顶分型的高点处结束，该高点是该线段的终点；特征序列的底分型中，第一和第二元素间不存在特征序列的缺口，那么该线段在该底分型的低点处结束，该低点是该线段的终点；
	+ 第二种情况：特征序列的顶分型中，第一和第二元素间存在特征序列的缺口，如果从该分型最高点开始的向下一笔开始的序列的特征序列出现底分型，那么该线段在该顶分型的高点处结束，该高点是该线段的终点；特征序列的底分型中，第一和第二元素间存在特征序列的缺口，如果从该分型最低点开始的向上一笔开始的序列的特征序列出现顶分型，那么该线段在该底分型的低点处结束，该低点是该线段的终点；
	+ 强调，在第二种情况下，后一特征序列不一定封闭前一特征序列相应的缺口，而且，第二个序列中的分型，不分第一二种情况，只要有分型就可以。








